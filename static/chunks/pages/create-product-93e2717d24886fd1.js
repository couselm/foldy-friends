(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[852],{578:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create-product",function(){return t(401)}])},401:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return p}});var r=t(5893),n=t(7294),l=t(4687),s=t(6075),o=t(8688);let i="https://rmqcrdwceiajckqygorb.supabase.co",c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJtcWNyZHdjZWlhamNrcXlnb3JiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTc1NTAyOTIsImV4cCI6MjAzMzEyNjI5Mn0.ustbBBT7nOt-6odyOC4ge79Wo5o9DDowMoO6js3L5Po";if(!i||!c)throw Error("Missing Supabase URL or key. Please check your environment variables.");let u=(0,o.eI)(i,c);var d=()=>{let[e,a]=(0,n.useState)({id:0,name:"",description:"",full_price:0,sale_price:0,images:[],sizes:[],categories:[],tags:[],reviews:[],created_at:new Date,updated_at:new Date,sold_to_date:0,stock:0,sku:""}),[t,o]=(0,n.useState)(null),i=e=>{let{name:t,value:r}=e.target;a(e=>({...e,[t]:r}))},c=e=>{let{name:t,value:r}=e.target;a(e=>({...e,[t]:r.split(",").map(e=>e.trim())}))},d=async()=>{let{name:r,description:n,full_price:l,sale_price:s,sizes:i,categories:c,tags:d,sku:p}=e;if(!r||!n||!l||!s||!t||0===i.length||0===c.length||0===d.length||!p){alert("Please fill in all fields.");return}let m=[];for(let e=0;e<t.length;e++){let a=t[e],r="".concat(Date.now(),"-").concat(a.name),n=new FormData;n.append("file",a),n.append("filename",r);let l=await fetch("/api/upload",{method:"POST",body:n}),s=await l.json();if(l.ok)m.push(s.url);else{console.error("Error uploading image:",s.error);return}}let{data:h,error:g}=await u.from("products").insert([{...e,images:m,created_at:new Date,updated_at:new Date,sold_to_date:0,stock:10}]).single();g?console.error("Error creating product:",g):(alert("Product created successfully!"),a({id:0,name:"",description:"",full_price:0,sale_price:0,images:[],sizes:[],categories:[],tags:[],reviews:[],created_at:new Date,updated_at:new Date,sold_to_date:0,stock:0,sku:""}),o(null))};return(0,r.jsxs)("div",{className:"flex flex-col max-w-7xl mx-auto my-6",children:[(0,r.jsx)("h1",{children:"Create New Product"}),(0,r.jsxs)("div",{className:"customer-information flex flex-col",children:[(0,r.jsx)(l.W,{type:"text",placeholder:"Name",value:e.name,onChange:i,name:"name"}),(0,r.jsx)(l.W,{type:"text",placeholder:"Description",value:e.description,onChange:i,name:"description"}),(0,r.jsx)(l.W,{type:"number",placeholder:"Full Price",value:e.full_price,onChange:i,name:"full_price"}),(0,r.jsx)(l.W,{type:"number",placeholder:"Sale Price",value:e.sale_price,onChange:i,name:"sale_price"}),(0,r.jsx)("input",{type:"file",multiple:!0,onChange:e=>o(e.target.files),className:"max-w-96 border border-gray-300 rounded-md mb-2 p-2"}),(0,r.jsx)(l.W,{type:"text",placeholder:"Sizes (comma separated)",value:e.sizes.join(", "),onChange:c,name:"sizes"}),(0,r.jsx)(l.W,{type:"text",placeholder:"Categories (comma separated)",value:e.categories.join(", "),onChange:c,name:"categories"}),(0,r.jsx)(l.W,{type:"text",placeholder:"Tags (comma separated)",value:e.tags.join(", "),onChange:c,name:"tags"}),(0,r.jsx)(l.W,{type:"text",placeholder:"SKU",value:e.sku,onChange:i,name:"sku"}),(0,r.jsx)(s.bH,{label:"Create Product",onClick:d})]})]})},p=()=>(0,r.jsx)(d,{})},4687:function(e,a,t){"use strict";t.d(a,{W:function(){return n}});var r=t(5893);t(7294);let n=e=>{let{type:a,placeholder:t,value:n,name:l,onChange:s}=e;return(0,r.jsx)("input",{type:a,placeholder:t,value:n,name:l,onChange:s,className:"max-w-96 border border-gray-300 rounded-md"})}}},function(e){e.O(0,[688,888,774,179],function(){return e(e.s=578)}),_N_E=e.O()}]);